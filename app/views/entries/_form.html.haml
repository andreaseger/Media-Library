- form_for @entry do |f|
  = f.error_messages
  %p
    = f.label :title
    %br
    = f.text_field :title
  %p
    = f.label :year
    %br
    = f.text_field :year
  %p
    = f.label :media_typ
    %br
    = f.collection_select :media_typ, Entry::MEDIATYPES, :to_s, :to_s
  %p
    = f.label :quality
    %br
    = f.collection_select :quality, Entry::QUALITIES, :to_s, :to_s

  - f.fields_for :links do |builder|
    = render 'link_fields', :f => builder
  %p
    = link_to_add_fields "Add Link", f, :links
  %p
    = f.label :nfo
    %br
    = f.text_area :nfo, :rows => 5
  %p
    = f.label :genres
    %br
    -#for genre in Genre.find(:all)
      = check_box_tag "entry[genre_ids][]", genre.id, @entry.genres.include?(genre)
      = genre.name
    = select_tag('entry[genre_ids][]', options_for_select(Genre.all.map {|genre| [genre.name, genre.id]}, @entry.genre_ids), :multiple => true, :size => 6)
  %p
    = f.submit

